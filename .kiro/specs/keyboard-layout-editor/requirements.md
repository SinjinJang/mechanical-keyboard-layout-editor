# Requirements Document

## Introduction

기계식 키보드 레이아웃 에디터는 사용자가 DIY 기계식 키보드 제작을 위해 키 스위치를 원하는 대로 배치하고, 이를 JSON 형식으로 저장하며, 3D 프린팅 또는 CNC 밀링을 위한 STL/DXF 모델을 생성할 수 있는 웹 애플리케이션입니다. 이 애플리케이션은 React.js 기반으로 구축되어 있으며, 직관적인 드래그 앤 드롭 인터페이스를 통해 키보드 레이아웃을 편집할 수 있습니다.

## Requirements

### Requirement 1

**User Story:** 키보드 제작자로서, 키 스위치를 시각적으로 배치하고 편집할 수 있어야 하므로, 직관적인 레이아웃 편집 환경이 필요합니다.

#### Acceptance Criteria

1. WHEN 사용자가 키 스위치를 클릭 THEN 시스템은 해당 키를 선택 상태로 표시해야 합니다
2. WHEN 사용자가 선택된 키를 드래그 THEN 시스템은 키를 0.25U 단위로 이동시켜야 합니다
3. WHEN 사용자가 키를 드래그 THEN 시스템은 플레이트 경계 내에서만 이동을 허용해야 합니다
4. WHEN 사용자가 선택된 키를 다시 클릭 THEN 시스템은 선택을 해제해야 합니다

### Requirement 2

**User Story:** 키보드 제작자로서, 키의 속성(라벨, 크기)을 편집할 수 있어야 하므로, 키 속성 편집 패널이 필요합니다.

#### Acceptance Criteria

1. WHEN 키가 선택된 상태에서 라벨을 입력 THEN 시스템은 해당 키의 라벨을 업데이트해야 합니다
2. WHEN 키가 선택된 상태에서 너비를 변경 THEN 시스템은 1U, 1.25U, 1.5U, 1.75U, 2U, 2.25U, 2.75U, 6U, 6.25U, 6.5U, 7U 중에서 선택할 수 있어야 합니다
3. WHEN 키가 선택된 상태에서 높이를 변경 THEN 시스템은 1U 또는 2U 중에서 선택할 수 있어야 합니다
4. WHEN 키가 선택되지 않은 상태에서 속성을 변경하려고 시도 THEN 시스템은 입력을 무시해야 합니다

### Requirement 3

**User Story:** 키보드 제작자로서, 키를 추가하거나 삭제할 수 있어야 하므로, 키 관리 기능이 필요합니다.

#### Acceptance Criteria

1. WHEN 사용자가 "Add New Switch" 버튼을 클릭 THEN 시스템은 플레이트의 우측 끝, 하단 정렬 위치에 새로운 1U x 1U 키를 추가해야 합니다
2. WHEN 키가 선택된 상태에서 "Remove Selected Switch" 버튼을 클릭 THEN 시스템은 선택된 키를 삭제하고 선택 상태를 해제해야 합니다
3. WHEN 키가 선택되지 않은 상태에서 삭제 버튼을 클릭 THEN 시스템은 동작을 무시해야 합니다
4. WHEN 새로운 키가 추가 THEN 시스템은 기본 라벨을 "New Key"로 설정해야 합니다

### Requirement 4

**User Story:** 키보드 제작자로서, 레이아웃을 파일로 저장하고 불러올 수 있어야 하므로, 파일 입출력 기능이 필요합니다.

#### Acceptance Criteria

1. WHEN 사용자가 "Download Layout" 버튼을 클릭 THEN 시스템은 현재 레이아웃을 JSON 형식으로 다운로드해야 합니다
2. WHEN 사용자가 "Upload Layout" 버튼을 클릭 THEN 시스템은 파일 선택 대화상자를 표시해야 합니다
3. WHEN 사용자가 유효한 JSON 레이아웃 파일을 업로드 THEN 시스템은 현재 레이아웃을 대체하고 선택 상태를 해제해야 합니다
4. WHEN JSON 파일이 로드 THEN 시스템은 플레이트 크기를 자동으로 조정해야 합니다

### Requirement 5

**User Story:** 키보드 제작자로서, 미리 정의된 레이아웃을 사용할 수 있어야 하므로, 사전 정의된 레이아웃 라이브러리가 필요합니다.

#### Acceptance Criteria

1. WHEN 사용자가 "Predefined Layout" 버튼을 클릭 THEN 시스템은 사용 가능한 레이아웃 목록을 서버에서 가져와야 합니다
2. WHEN 레이아웃 목록이 로드 THEN 시스템은 선택 가능한 레이아웃 대화상자를 표시해야 합니다
3. WHEN 사용자가 사전 정의된 레이아웃을 선택 THEN 시스템은 해당 레이아웃을 로드하고 현재 레이아웃을 대체해야 합니다
4. WHEN 레이아웃 로딩 중 THEN 시스템은 로딩 인디케이터를 표시해야 합니다

### Requirement 6

**User Story:** 키보드 제작자로서, 레이아웃을 기반으로 3D/2D 모델을 생성할 수 있어야 하므로, 모델 생성 기능이 필요합니다.

#### Acceptance Criteria

1. WHEN 사용자가 "Generate STL (3D)" 버튼을 클릭 THEN 시스템은 이메일 입력 대화상자를 표시해야 합니다
2. WHEN 사용자가 "Generate DXF (2D)" 버튼을 클릭 THEN 시스템은 이메일 입력 대화상자를 표시해야 합니다
3. WHEN 사용자가 유효한 이메일을 입력하고 확인 THEN 시스템은 서버에 모델 생성 요청을 전송해야 합니다
4. WHEN 모델 생성 요청이 처리 중 THEN 시스템은 로딩 인디케이터를 표시하고 중복 클릭을 방지해야 합니다

### Requirement 7

**User Story:** 키보드 제작자로서, 현재 레이아웃의 정보를 확인할 수 있어야 하므로, 레이아웃 정보 표시 기능이 필요합니다.

#### Acceptance Criteria

1. WHEN 레이아웃이 변경 THEN 시스템은 총 키 개수를 실시간으로 업데이트해야 합니다
2. WHEN 레이아웃이 변경 THEN 시스템은 플레이트 크기를 U 단위로 실시간 계산하여 표시해야 합니다
3. WHEN 키가 추가되거나 이동 THEN 시스템은 플레이트 크기를 자동으로 조정해야 합니다
4. WHEN 플레이트 크기가 계산 THEN 시스템은 모든 키를 포함하는 최소 크기로 설정해야 합니다

### Requirement 8

**User Story:** 키보드 제작자로서, 애플리케이션을 안정적으로 사용할 수 있어야 하므로, 오류 처리 및 사용자 경험 개선 기능이 필요합니다.

#### Acceptance Criteria

1. WHEN 네트워크 요청이 실패 THEN 시스템은 적절한 오류 메시지를 표시해야 합니다
2. WHEN 잘못된 파일 형식이 업로드 THEN 시스템은 오류를 처리하고 사용자에게 알려야 합니다
3. WHEN 서버 응답이 지연 THEN 시스템은 로딩 상태를 유지하고 사용자 인터페이스를 비활성화해야 합니다
4. WHEN 키 속성 입력에서 유효하지 않은 값 THEN 시스템은 입력을 무시하거나 기본값으로 복원해야 합니다