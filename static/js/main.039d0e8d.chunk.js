(this["webpackJsonpmechanical-keyboard-layout-editor"]=this["webpackJsonpmechanical-keyboard-layout-editor"]||[]).push([[0],{28:function(e,t,a){},36:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(10),c=a.n(l),s=a(13),o=a(7),h=a(11),r=a(12),d=a(16),u=a(14),j=(a(28),a(23)),y=a.n(j),b=a(15),p=a(6),O=a(1),v=60,x=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e={x:this.props.x*v,y:this.props.y*v},t={width:this.props.w*v-2,height:this.props.h*v-2};return Object(O.jsx)(y.a,{grid:[15,15],onDrag:this.props.onDrag,position:e,children:Object(O.jsx)("div",{className:"key-switch",style:t,onClick:this.props.onClick,children:this.props.label})})}}]),a}(i.a.Component),g=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(h.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e,t;return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"editpanel__container",children:Object(O.jsxs)(p.a.Group,{controlId:"uploadLayout",className:"editpanel__item",children:[Object(O.jsx)(p.a.Label,{children:"Layout File to Upload"}),Object(O.jsx)(p.a.File,{id:"layoutFile",type:"file",accept:".json",onChange:this.props.onLayoutFileChange})]})}),Object(O.jsxs)("div",{className:"editpanel__container",children:[Object(O.jsx)(b.a,{className:"editpanel__item",variant:"outline-primary",onClick:this.props.onAddSwitchClick,children:"Add Switch"}),Object(O.jsx)(b.a,{className:"editpanel__item",variant:"outline-secondary",download:"layout.json",href:"data:text/json; charset=utf-8,".concat(this.props.onDownloadClick()),children:"Download Layout"}),Object(O.jsx)(b.a,{className:"editpanel__item",variant:"outline-success",onClick:function(){return alert("TODO: generate 3D/2D model")},children:"Generate 3D/2D Model"})]}),Object(O.jsxs)("div",{className:"editpanel__container",children:[Object(O.jsxs)(p.a.Group,{controlId:"keyLabel",className:"editpanel__item",children:[Object(O.jsx)(p.a.Label,{children:"Key Label"}),Object(O.jsx)(p.a.Control,{type:"text",name:"key_label",value:this.props.selectedKey,onChange:this.props.onLabelChange})]}),Object(O.jsxs)(p.a.Group,{controlId:"width",className:"editpanel__item",children:[Object(O.jsx)(p.a.Label,{children:"Width"}),Object(O.jsxs)(p.a.Control,{as:"select",name:"key_width",value:null===(e=this.props.selectedAttrs)||void 0===e?void 0:e.w,onChange:this.props.onSizeChange,children:[Object(O.jsx)("option",{value:"1",children:"1U"}),Object(O.jsx)("option",{value:"1.25",children:"1.25U"}),Object(O.jsx)("option",{value:"1.5",children:"1.5U"}),Object(O.jsx)("option",{value:"1.75",children:"1.75U"}),Object(O.jsx)("option",{value:"2",children:"2U"}),Object(O.jsx)("option",{value:"2.25",children:"2.25U"}),Object(O.jsx)("option",{value:"2.75",children:"2.75U"})]})]}),Object(O.jsxs)(p.a.Group,{controlId:"height",className:"editpanel__item",children:[Object(O.jsx)(p.a.Label,{children:"Height"}),Object(O.jsxs)(p.a.Control,{as:"select",name:"key_height",value:null===(t=this.props.selectedAttrs)||void 0===t?void 0:t.h,onChange:this.props.onSizeChange,children:[Object(O.jsx)("option",{value:"1",children:"1U"}),Object(O.jsx)("option",{value:"2",children:"2U"})]})]})]})]})}}]),a}(i.a.Component),w=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={width:3,height:6.25,layout:{"Print Screen":{x:0,y:0,w:1,h:1},"Scroll Lock":{x:1,y:0,w:1,h:1},Pause:{x:2,y:0,w:1,h:1},Insert:{x:0,y:1.25,w:1,h:1},Home:{x:1,y:1.25,w:1,h:1},"Page Up":{x:2,y:1.25,w:1,h:1},Delete:{x:0,y:2.25,w:1,h:1},End:{x:1,y:2.25,w:1,h:1},"Page Down":{x:2,y:2.25,w:1,h:1},Up:{x:1,y:4.25,w:1,h:1},Left:{x:0,y:5.25,w:1,h:1},Down:{x:1,y:5.25,w:1,h:1},Right:{x:2,y:5.25,w:1,h:1}},selectedKey:""},n}return Object(r.a)(a,[{key:"handleAddSwitch",value:function(){var e=Object(o.a)({},this.state.layout);e["Key "+Object.keys(e).length]={x:this.state.width,y:this.state.height-1,w:1,h:1};var t=this.resizePlate(e);this.setState(Object(o.a)({layout:e},t))}},{key:"handleLabelChange",value:function(e){var t=Object(o.a)({},this.state.layout),a=this.state.selectedKey,n=t[a];delete t[a],t[e.target.value]=n,this.setState({layout:t,selectedKey:e.target.value})}},{key:"handleSizeChange",value:function(e){var t=Object(o.a)({},this.state.layout),a=t[this.state.selectedKey],n=Number(e.target.value);if("width"===e.target.id)a.w=n;else{if("height"!==e.target.id)return void console.log(">>>>> undefined id: "+e.target.id);a.h=n}var i=this.resizePlate(t);this.setState(Object(o.a)(Object(o.a)({},i),{},{layout:t}))}},{key:"handleSwitchDrag",value:function(e,t){var a=t.node.textContent,n=Object(o.a)({},this.state.layout),i=n[a];i.x+=t.deltaX/v,i.y+=t.deltaY/v;var l=this.resizePlate(n);this.setState(Object(o.a)({layout:n},l))}},{key:"handleSwitchClick",value:function(e){this.setState({selectedKey:e})}},{key:"handleDownloadClick",value:function(){return JSON.stringify(this.state.layout)}},{key:"handleLayoutFileChange",value:function(e){var t=this,a=new FileReader;a.readAsBinaryString(e.target.files[0]),a.onloadend=function(){var e=JSON.parse(a.result);Object.entries(e.layout).map((function(e){var t=Object(s.a)(e,2),a=(t[0],t[1]);a.w="w"in a?a.w:1,a.h="h"in a?a.h:1})),t.setState({width:e.width,height:e.height,layout:e.layout,selectedKey:""})}}},{key:"resizePlate",value:function(e){for(var t=-1,a=-1,n=0,i=Object.entries(e);n<i.length;n++){var l=Object(s.a)(i[n],2),c=(l[0],l[1]),o=c.x+c.w;t=o>t?o:t;var h=c.y+c.h;a=h>a?h:a}return{width:t,height:a}}},{key:"render",value:function(){for(var e=this,t={width:this.state.width*v,height:this.state.height*v},a={width:t.width+30,height:t.height+30},n=this.state,i=n.selectedKey,l=n.layout,c=[],o=function(){var t=Object(s.a)(r[h],2),a=t[0],n=t[1];c.push(Object(O.jsx)(x,{label:a,x:n.x,y:n.y,w:n.w,h:n.h,onDrag:function(t,a){return e.handleSwitchDrag(t,a)},onClick:function(t){return e.handleSwitchClick(a)}},a))},h=0,r=Object.entries(l);h<r.length;h++)o();return Object(O.jsxs)("div",{children:[Object(O.jsx)(g,{selectedKey:i,selectedAttrs:l[i],onAddSwitchClick:function(){return e.handleAddSwitch()},onSizeChange:function(t){return e.handleSizeChange(t)},onLabelChange:function(t){return e.handleLabelChange(t)},onDownloadClick:function(){return e.handleDownloadClick()},onLayoutFileChange:function(t){return e.handleLayoutFileChange(t)}}),Object(O.jsx)("div",{className:"key-plate-outer",style:a,children:Object(O.jsx)("div",{className:"key-plate-inner",style:t,children:c})})]})}}]),a}(i.a.Component);var f=function(){return Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("h1",{children:"Mechanical Keyboard Layout Editor"}),Object(O.jsx)(w,{})]})},C=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,39)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,l=t.getLCP,c=t.getTTFB;a(e),n(e),i(e),l(e),c(e)}))};a(36),a(37);c.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(f,{})}),document.getElementById("root")),C()}},[[38,1,2]]]);
//# sourceMappingURL=main.039d0e8d.chunk.js.map