(this["webpackJsonpmechanical-keyboard-layout-editor"]=this["webpackJsonpmechanical-keyboard-layout-editor"]||[]).push([[0],{28:function(e,t,a){},34:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(15),c=a.n(l),s=a(16),o=a(6),r=a(9),h=a(10),d=a(12),u=a(11),j=(a(28),a(13)),b=a(7),y=60;function v(e,t){return{x:e*y+15,y:t*y+15}}var O=a(23),p=a.n(O),g=(a(34),a(1)),f=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).bounds=Object(o.a)({},v(0,0)),n}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.label,a=e.x,n=e.y,i=e.w,l=e.h,c=e.isSelected,s=Object(o.a)({},v(a,n)),r=Object(o.a)(Object(o.a)({},function(e,t){return{width:e*y-2,height:t*y-2}}(i,l)),{},{fontWeight:c?"bold":"normal"});return Object(g.jsx)(p.a,{grid:[15,15],onDrag:this.props.onDrag,position:s,bounds:this.bounds,children:Object(g.jsx)("div",{className:"key-switch",style:r,onClick:this.props.onClick,children:t})})}}]),a}(i.a.Component),x=a.p+"static/media/add_circle_outline_black_24dp.b4a78441.svg",m=a.p+"static/media/remove_circle_outline_black_24dp.1bfeccf5.svg",w=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e,t;return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"editpanel__container",children:[Object(g.jsxs)(b.a.Group,{controlId:"uploadLayout",className:"editpanel__item",children:[Object(g.jsx)(b.a.Label,{children:"Layout File to Upload"}),Object(g.jsx)(b.a.File,{id:"layoutFile",type:"file",accept:".json",onChange:this.props.onLayoutFileChange})]}),Object(g.jsx)(j.a,{className:"editpanel__item",variant:"outline-secondary",download:"layout.json",href:"data:text/json; charset=utf-8,".concat(this.props.onDownloadClick()),children:"Download Layout"}),Object(g.jsx)(j.a,{className:"editpanel__item",variant:"outline-success",onClick:function(){return alert("TODO: generate 3D/2D model")},children:"Generate 3D/2D Model"})]}),Object(g.jsxs)("div",{className:"editpanel__container",children:[Object(g.jsxs)(b.a.Group,{controlId:"keyLabel",className:"editpanel__item",children:[Object(g.jsx)(b.a.Label,{children:"Key Label"}),Object(g.jsx)(b.a.Control,{type:"text",name:"key_label",value:this.props.selectedKey,onChange:this.props.onLabelChange})]}),Object(g.jsxs)(b.a.Group,{controlId:"width",className:"editpanel__item",children:[Object(g.jsx)(b.a.Label,{children:"Width"}),Object(g.jsxs)(b.a.Control,{as:"select",name:"key_width",value:null===(e=this.props.selectedAttrs)||void 0===e?void 0:e.w,onChange:this.props.onSizeChange,children:[Object(g.jsx)("option",{value:"1",children:"1U"}),Object(g.jsx)("option",{value:"1.25",children:"1.25U"}),Object(g.jsx)("option",{value:"1.5",children:"1.5U"}),Object(g.jsx)("option",{value:"1.75",children:"1.75U"}),Object(g.jsx)("option",{value:"2",children:"2U"}),Object(g.jsx)("option",{value:"2.25",children:"2.25U"}),Object(g.jsx)("option",{value:"2.75",children:"2.75U"})]})]}),Object(g.jsxs)(b.a.Group,{controlId:"height",className:"editpanel__item",children:[Object(g.jsx)(b.a.Label,{children:"Height"}),Object(g.jsxs)(b.a.Control,{as:"select",name:"key_height",value:null===(t=this.props.selectedAttrs)||void 0===t?void 0:t.h,onChange:this.props.onSizeChange,children:[Object(g.jsx)("option",{value:"1",children:"1U"}),Object(g.jsx)("option",{value:"2",children:"2U"})]})]}),Object(g.jsx)(j.a,{className:"editpanel__item",variant:"outline-light",children:Object(g.jsx)("img",{className:"editpanel__imageicon",alt:"Add New Switch",src:x,onClick:this.props.onAddSwitchClick})}),Object(g.jsx)(j.a,{className:"editpanel__item",variant:"outline-light",children:Object(g.jsx)("img",{className:"editpanel__imageicon",alt:"Remove Selected Switch",src:m,onClick:this.props.onRemoveSwitchClick})})]})]})}}]),a}(i.a.Component),C=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(r.a)(this,a);var i={"New Key":{x:0,y:0,w:1,h:1}},l=(n=t.call(this,e)).resizePlate(i);return n.state=Object(o.a)({selectedKey:null,layout:i},l),n}return Object(h.a)(a,[{key:"newKeyLabel",value:function(){var e,t=this.state.layout,a=Object.keys(t).length;do{e="Key "+a++}while(e in t);return e}},{key:"handleAddSwitch",value:function(){var e=Object(o.a)({},this.state.layout);e[this.newKeyLabel()]={x:this.state.width,y:Math.max(this.state.height-1,0),w:1,h:1};var t=this.resizePlate(e);this.setState(Object(o.a)({layout:e},t))}},{key:"handleRemoveSwitch",value:function(){var e=Object(o.a)({},this.state.layout);delete e[this.state.selectedKey];var t=this.resizePlate(e);this.setState(Object(o.a)({selectedKey:null,selectedAttrs:null,layout:e},t))}},{key:"handleLabelChange",value:function(e){var t=Object(o.a)({},this.state.layout),a=this.state.selectedKey;if(null!=a){var n=t[a];delete t[a],t[e.target.value]=n,this.setState({layout:t,selectedKey:e.target.value})}}},{key:"handleSizeChange",value:function(e){var t=Object(o.a)({},this.state.layout),a=this.state.selectedKey;if(null!=a){var n=t[a],i=Number(e.target.value);if("width"===e.target.id)n.w=i;else{if("height"!==e.target.id)return void console.log(">>>>> undefined id: "+e.target.id);n.h=i}var l=this.resizePlate(t);this.setState(Object(o.a)(Object(o.a)({},l),{},{layout:t}))}}},{key:"handleSwitchDrag",value:function(e,t){var a=t.node.textContent,n=Object(o.a)({},this.state.layout),i=n[a];i.x+=t.deltaX/y,i.y+=t.deltaY/y;var l=this.resizePlate(n);this.setState(Object(o.a)({layout:n},l))}},{key:"handleSwitchClick",value:function(e){this.setState({selectedKey:e})}},{key:"handleDownloadClick",value:function(){return JSON.stringify(this.state.layout)}},{key:"handleLayoutFileChange",value:function(e){var t=this,a=new FileReader;a.readAsBinaryString(e.target.files[0]),a.onloadend=function(){var e=JSON.parse(a.result);Object.entries(e.layout).map((function(e){var t=Object(s.a)(e,2),a=(t[0],t[1]);a.w="w"in a?a.w:1,a.h="h"in a?a.h:1})),t.setState({width:e.width,height:e.height,layout:e.layout,selectedKey:""})}}},{key:"resizePlate",value:function(e){for(var t=0,a=0,n=0,i=Object.entries(e);n<i.length;n++){var l=Object(s.a)(i[n],2),c=(l[0],l[1]),o=c.x+c.w;t=o>t?o:t;var r=c.y+c.h;a=r>a?r:a}return{width:t,height:a}}},{key:"render",value:function(){for(var e=this,t=this.state,a=t.selectedKey,n=t.layout,i=t.width,l=t.height,c=Object(o.a)({},{width:i*y+30,height:l*y+30}),r=[],h=function(){var t=Object(s.a)(u[d],2),n=t[0],i=t[1];r.push(Object(g.jsx)(f,{label:n,x:i.x,y:i.y,w:i.w,h:i.h,isSelected:n===a,onDrag:function(t,a){return e.handleSwitchDrag(t,a)},onClick:function(t){return e.handleSwitchClick(n)}},n))},d=0,u=Object.entries(n);d<u.length;d++)h();return Object(g.jsxs)("div",{children:[Object(g.jsx)(w,{selectedKey:a,selectedAttrs:n[a],onAddSwitchClick:function(){return e.handleAddSwitch()},onRemoveSwitchClick:function(){return e.handleRemoveSwitch()},onSizeChange:function(t){return e.handleSizeChange(t)},onLabelChange:function(t){return e.handleLabelChange(t)},onDownloadClick:function(){return e.handleDownloadClick()},onLayoutFileChange:function(t){return e.handleLayoutFileChange(t)}}),Object(g.jsx)("div",{className:"key-plate",style:c,children:r})]})}}]),a}(i.a.Component);var k=function(){return Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)("h1",{children:"Mechanical Keyboard Layout Editor"}),Object(g.jsx)(C,{})]})},_=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,40)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,l=t.getLCP,c=t.getTTFB;a(e),n(e),i(e),l(e),c(e)}))};a(37),a(38);c.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(k,{})}),document.getElementById("root")),_()}},[[39,1,2]]]);
//# sourceMappingURL=main.68971a05.chunk.js.map