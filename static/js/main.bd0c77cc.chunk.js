(this["webpackJsonpmechanical-keyboard-layout-editor"]=this["webpackJsonpmechanical-keyboard-layout-editor"]||[]).push([[0],{44:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(13),l=a.n(i),s=(a(44),a(45),a(10)),r=a(33),o=15,d=60;function j(e,t){return{x:e*d+o,y:t*d+o}}function u(e,t){return{width:e*d-2,height:t*d-2}}function h(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,c=0,i=Object(r.a)(e);try{for(i.s();!(t=i.n()).done;){var l=t.value,s=l.x+l.w;n=s>n?s:n;var o=l.y+l.h;c=o>c?o:c}}catch(j){i.e(j)}finally{i.f()}return{width:a?n:n*d+30,height:a?c:c*d+30}}var b=a(18),p=a.n(b),g=a(34),f=a(20),m=a(38),x=(a(47),a(11)),O=a(7),v=a(92),y=a(35),_=a.n(y),w=a(19),k=a.n(w),N=a.p+"static/media/add_circle_outline_black_24dp.b4a78441.svg",S=a.p+"static/media/remove_circle_outline_black_24dp.1bfeccf5.svg",C=a(2);var L=function(e){var t=e.layoutState,a=e.selectedState,n=Object(s.b)(!1),c=function(){return Object(f.a)(Object(f.a)({},h(t.get(),!0)),{},{layout:t.get()})},i=function(){var e=Object(g.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.set(!0),"https://diy-mechanical-keyboard.herokuapp.com",e.next=4,_.a.post("https://diy-mechanical-keyboard.herokuapp.com/model-3d/plate",c());case 4:t=e.sent,a=t.data,k.a.saveAs(new Blob([a],{type:"text/plain; charset=utf-8"}),"plate-model.stl"),n.set(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(e){if(-1!==a.get()){var n=Number(e.target.value);if("width"===e.target.id)t[a.get()].w.set(n);else{if("height"!==e.target.id)return void console.log(">>>>> undefined id: "+e.target.id);t[a.get()].h.set(n)}}};return Object(C.jsxs)("div",{children:[Object(C.jsx)("div",{className:"editpanel__loading",children:n.get()?Object(C.jsx)(v.a,{}):""}),Object(C.jsxs)("div",{className:"editpanel__container",children:[Object(C.jsxs)(O.a.Group,{controlId:"uploadLayout",className:"editpanel__item",children:[Object(C.jsx)(O.a.Label,{children:"Layout File to Upload"}),Object(C.jsx)(O.a.File,{id:"layoutFile",type:"file",accept:".json",onChange:function(e){var n=new FileReader;n.readAsBinaryString(e.target.files[0]),n.onloadend=function(){var e=JSON.parse(n.result);Object.entries(e.layout).map((function(e){var t=Object(m.a)(e,2),a=(t[0],t[1]);a.w="w"in a?a.w:1,a.h="h"in a?a.h:1})),t.set(e.layout),a.set(-1)}}})]}),Object(C.jsx)(x.a,{className:"editpanel__item",variant:"outline-secondary",onClick:function(){var e=JSON.stringify(c());k.a.saveAs(new Blob([e],{type:"text/json; charset=utf-8"}),"plate-layout.json")},children:"Download Layout"}),Object(C.jsx)(x.a,{className:"editpanel__item",variant:"outline-success",onClick:i,children:"Generate 3D Model"})]}),Object(C.jsxs)("div",{className:"editpanel__container",children:[Object(C.jsxs)(O.a.Group,{controlId:"keyLabel",className:"editpanel__item",children:[Object(C.jsx)(O.a.Label,{children:"Key Label"}),Object(C.jsx)(O.a.Control,{type:"text",name:"key_label",value:-1===a.get()?"":t[a.get()].label.get(),onChange:function(e){-1!==a.get()&&t[a.get()].label.set(e.target.value)}})]}),Object(C.jsxs)(O.a.Group,{controlId:"width",className:"editpanel__item",children:[Object(C.jsx)(O.a.Label,{children:"Width"}),Object(C.jsxs)(O.a.Control,{as:"select",name:"key_width",value:-1===a.get()?"1":t[a.get()].w.get(),onChange:l,children:[Object(C.jsx)("option",{value:"1",children:"1U"}),Object(C.jsx)("option",{value:"1.25",children:"1.25U"}),Object(C.jsx)("option",{value:"1.5",children:"1.5U"}),Object(C.jsx)("option",{value:"1.75",children:"1.75U"}),Object(C.jsx)("option",{value:"2",children:"2U"}),Object(C.jsx)("option",{value:"2.25",children:"2.25U"}),Object(C.jsx)("option",{value:"2.75",children:"2.75U"})]})]}),Object(C.jsxs)(O.a.Group,{controlId:"height",className:"editpanel__item",children:[Object(C.jsx)(O.a.Label,{children:"Height"}),Object(C.jsxs)(O.a.Control,{as:"select",name:"key_height",value:-1===a.get()?"1":t[a.get()].h.get(),onChange:l,children:[Object(C.jsx)("option",{value:"1",children:"1U"}),Object(C.jsx)("option",{value:"2",children:"2U"})]})]}),Object(C.jsx)(x.a,{className:"editpanel__item",variant:"outline-light",children:Object(C.jsx)("img",{className:"editpanel__imageicon",alt:"Add New Switch",src:N,onClick:function(){var e=h(t.get(),!0),a=e.width,n=e.height;t.merge([{label:"New Key",x:a,y:Math.max(n-1,0),w:1,h:1}])}})}),Object(C.jsx)(x.a,{className:"editpanel__item",variant:"outline-light",children:Object(C.jsx)("img",{className:"editpanel__imageicon",alt:"Remove Selected Switch",src:S,onClick:function(){-1!==a.get()&&(t[a.get()].set(s.a),a.set(-1))}})})]})]})},U=a(37),F=a.n(U);a(75);var G=function(e){var t=e.keyState,a=t.label,n=t.x,c=t.y,i=t.w,l=t.h,s=e.selectedState,r=s.get()===e.seq?"key-switch-selected":"";return Object(C.jsx)(F.a,{grid:[15,15],bounds:{left:o,top:o},position:j(n.get(),c.get()),onDrag:function(e,t){n.set((function(e){return e+t.deltaX/d})),c.set((function(e){return e+t.deltaY/d}))},children:Object(C.jsx)("div",{className:"key-switch ".concat(r),style:u(i.get(),l.get()),onClick:function(){s.set((function(t){return t===e.seq?-1:e.seq}))},children:a.get()})})};var A=function(){var e=Object(s.b)([{label:"Key 1",w:1,h:1,x:0,y:0}]),t=Object(s.b)(-1);return Object(C.jsxs)("div",{children:[Object(C.jsx)(L,{layoutState:e,selectedState:t}),Object(C.jsx)("div",{className:"key-plate",style:h(e.get()),children:e.map((function(e,a){return Object(C.jsx)(G,{seq:a,keyState:e,selectedState:t},a)}))})]})};a(76);var B=function(){return Object(C.jsx)("header",{children:Object(C.jsx)("p",{className:"app_name",children:"Mechanical Keyboard Layout Editor"})})};a(77);var I=function(){return Object(C.jsxs)("footer",{className:"footer",children:[Object(C.jsxs)("div",{className:"footer__item",children:["Copyright\xa92021 Sinjin Jang",Object(C.jsx)("br",{}),"All rights reserved."]}),Object(C.jsxs)("div",{className:"footer__item",children:["Get source code of this app:",Object(C.jsx)("br",{}),Object(C.jsx)("a",{href:"https://github.com/SinjinJang/mechanical-keyboard-layout-editor",target:"_blank",children:"mechanical-keyboard-layout-editor on GitHub"})]}),Object(C.jsxs)("div",{className:"footer__item",children:[Object(C.jsx)("a",{href:"https://donaricano.com/mypage/1722367584_zHWZl2",target:"_blank",children:"\ub3c4\ub124\ub9ac\uce74\ub178 \ucee4\ud53c \ud6c4\uc6d0"}),Object(C.jsx)("br",{}),Object(C.jsx)("a",{href:"https://www.buymeacoffee.com/sinjin0",target:"_blank",children:"Buy Me a Coffee"})]})]})};var J=function(){return Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(B,{}),Object(C.jsx)(A,{}),Object(C.jsx)(I,{})]})},M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,93)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,l=t.getTTFB;a(e),n(e),c(e),i(e),l(e)}))};a(78),a(79);l.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(J,{})}),document.getElementById("root")),M()}},[[80,1,2]]]);
//# sourceMappingURL=main.bd0c77cc.chunk.js.map