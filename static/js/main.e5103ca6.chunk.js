(this["webpackJsonpmechanical-keyboard-layout-editor"]=this["webpackJsonpmechanical-keyboard-layout-editor"]||[]).push([[0],{28:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),l=n(10),o=n.n(l),h=n(13),c=n(7),s=n(11),r=n(12),d=n(15),u=n(14),j=(n(28),n(23)),y=n.n(j),b=n(19),p=n(6),O=n(2),v=60,g=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e={x:this.props.x*v,y:this.props.y*v},t={width:this.props.w*v-2,height:this.props.h*v-2};return Object(O.jsx)(y.a,{grid:[15,15],onDrag:this.props.onDrag,position:e,children:Object(O.jsx)("div",{className:"key-switch",style:t,onClick:this.props.onClick,children:this.props.label})})}}]),n}(i.a.Component),x=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e,t;return Object(O.jsxs)("div",{children:[Object(O.jsxs)(p.a.Group,{controlId:"keyLabel",children:[Object(O.jsx)(p.a.Label,{children:"Key Label"}),Object(O.jsx)(p.a.Control,{type:"text",name:"key_label",value:this.props.selectedKey,onChange:this.props.onLabelChange})]}),Object(O.jsxs)(p.a.Group,{controlId:"width",children:[Object(O.jsx)(p.a.Label,{children:"Width"}),Object(O.jsxs)(p.a.Control,{as:"select",name:"key_width",value:null===(e=this.props.selectedAttrs)||void 0===e?void 0:e.w,onChange:this.props.onSizeChange,children:[Object(O.jsx)("option",{value:"1",children:"1U"}),Object(O.jsx)("option",{value:"1.25",children:"1.25U"}),Object(O.jsx)("option",{value:"1.5",children:"1.5U"}),Object(O.jsx)("option",{value:"1.75",children:"1.75U"}),Object(O.jsx)("option",{value:"2",children:"2U"}),Object(O.jsx)("option",{value:"2.25",children:"2.25U"}),Object(O.jsx)("option",{value:"2.75",children:"2.75U"})]})]}),Object(O.jsxs)(p.a.Group,{controlId:"height",children:[Object(O.jsx)(p.a.Label,{children:"Height"}),Object(O.jsxs)(p.a.Control,{as:"select",name:"key_height",value:null===(t=this.props.selectedAttrs)||void 0===t?void 0:t.h,onChange:this.props.onSizeChange,children:[Object(O.jsx)("option",{value:"1",children:"1U"}),Object(O.jsx)("option",{value:"2",children:"2U"})]})]}),Object(O.jsx)(b.a,{variant:"outline-primary",onClick:this.props.onAddSwitchClick,children:"Add Switch"})," ",Object(O.jsx)(b.a,{variant:"outline-secondary",download:"layout.json",href:"data:text/json; charset=utf-8,".concat(this.props.onDownloadClick()),children:"Download"})," ",Object(O.jsxs)(p.a.Group,{controlId:"uploadLayout",children:[Object(O.jsx)(p.a.Label,{children:"Layout File to Upload"}),Object(O.jsx)(p.a.File,{id:"layoutFile",type:"file",accept:".json",onChange:this.props.onLayoutFileChange})]})]})}}]),n}(i.a.Component),w=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={width:3,height:6.25,layout:{"Print Screen":{x:0,y:0,w:1,h:1},"Scroll Lock":{x:1,y:0,w:1,h:1},Pause:{x:2,y:0,w:1,h:1},Insert:{x:0,y:1.25,w:1,h:1},Home:{x:1,y:1.25,w:1,h:1},"Page Up":{x:2,y:1.25,w:1,h:1},Delete:{x:0,y:2.25,w:1,h:1},End:{x:1,y:2.25,w:1,h:1},"Page Down":{x:2,y:2.25,w:1,h:1},Up:{x:1,y:4.25,w:1,h:1},Left:{x:0,y:5.25,w:1,h:1},Down:{x:1,y:5.25,w:1,h:1},Right:{x:2,y:5.25,w:1,h:1}},selectedKey:""},a}return Object(r.a)(n,[{key:"handleAddSwitch",value:function(){var e=Object(c.a)({},this.state.layout);e["Key "+Object.keys(e).length]={x:this.state.width,y:this.state.height-1,w:1,h:1};var t=this.resizePlate(e);this.setState(Object(c.a)({layout:e},t))}},{key:"handleLabelChange",value:function(e){var t=Object(c.a)({},this.state.layout),n=this.state.selectedKey,a=t[n];delete t[n],t[e.target.value]=a,this.setState({layout:t,selectedKey:e.target.value})}},{key:"handleSizeChange",value:function(e){var t=Object(c.a)({},this.state.layout),n=t[this.state.selectedKey],a=Number(e.target.value);if("width"===e.target.id)n.w=a;else{if("height"!==e.target.id)return void console.log(">>>>> undefined id: "+e.target.id);n.h=a}var i=this.resizePlate(t);this.setState(Object(c.a)(Object(c.a)({},i),{},{layout:t}))}},{key:"handleSwitchDrag",value:function(e,t){var n=t.node.textContent,a=Object(c.a)({},this.state.layout),i=a[n];i.x+=t.deltaX/v,i.y+=t.deltaY/v;var l=this.resizePlate(a);this.setState(Object(c.a)({layout:a},l))}},{key:"handleSwitchClick",value:function(e){this.setState({selectedKey:e})}},{key:"handleDownloadClick",value:function(){return JSON.stringify(this.state.layout)}},{key:"handleLayoutFileChange",value:function(e){var t=this,n=new FileReader;n.readAsBinaryString(e.target.files[0]),n.onloadend=function(){var e=JSON.parse(n.result);Object.entries(e.layout).map((function(e){var t=Object(h.a)(e,2),n=(t[0],t[1]);n.w="w"in n?n.w:1,n.h="h"in n?n.h:1})),t.setState({width:e.width,height:e.height,layout:e.layout,selectedKey:""})}}},{key:"resizePlate",value:function(e){for(var t=-1,n=-1,a=0,i=Object.entries(e);a<i.length;a++){var l=Object(h.a)(i[a],2),o=(l[0],l[1]),c=o.x+o.w;t=c>t?c:t;var s=o.y+o.h;n=s>n?s:n}return{width:t,height:n}}},{key:"render",value:function(){for(var e=this,t={width:this.state.width*v,height:this.state.height*v},n={width:t.width+30,height:t.height+30},a=this.state,i=a.selectedKey,l=a.layout,o=[],c=function(){var t=Object(h.a)(r[s],2),n=t[0],a=t[1];o.push(Object(O.jsx)(g,{label:n,x:a.x,y:a.y,w:a.w,h:a.h,onDrag:function(t,n){return e.handleSwitchDrag(t,n)},onClick:function(t){return e.handleSwitchClick(n)}},n))},s=0,r=Object.entries(l);s<r.length;s++)c();return Object(O.jsxs)("div",{children:[Object(O.jsx)(x,{selectedKey:i,selectedAttrs:l[i],onAddSwitchClick:function(){return e.handleAddSwitch()},onSizeChange:function(t){return e.handleSizeChange(t)},onLabelChange:function(t){return e.handleLabelChange(t)},onDownloadClick:function(){return e.handleDownloadClick()},onLayoutFileChange:function(t){return e.handleLayoutFileChange(t)}}),Object(O.jsx)("div",{className:"key-plate-outer",style:n,children:Object(O.jsx)("div",{className:"key-plate-inner",style:t,children:o})})]})}}]),n}(i.a.Component);var f=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(w,{})})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,l=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),l(e),o(e)}))};n(36),n(37);o.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(f,{})}),document.getElementById("root")),C()}},[[38,1,2]]]);
//# sourceMappingURL=main.e5103ca6.chunk.js.map