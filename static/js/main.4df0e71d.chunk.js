(this["webpackJsonpmechanical-keyboard-layout-editor"]=this["webpackJsonpmechanical-keyboard-layout-editor"]||[]).push([[0],{41:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(12),l=a.n(i),r=(a(41),a(42),a(9)),s=a(32),o=15,d=60;function j(e,t){return{x:e*d+o,y:t*d+o}}function u(e,t){return{width:e*d-2,height:t*d-2}}function h(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,c=0,i=Object(s.a)(e);try{for(i.s();!(t=i.n()).done;){var l=t.value,r=l.x+l.w;n=r>n?r:n;var o=l.y+l.h;c=o>c?o:c}}catch(j){i.e(j)}finally{i.f()}return{width:a?n:n*d+30,height:a?c:c*d+30}}var b=a(17),p=a.n(b),g=a(33),f=a(19),m=a(36),x=(a(44),a(10)),O=a(7),v=a(34),y=a.n(v),_=a(18),w=a.n(_),k=a.p+"static/media/add_circle_outline_black_24dp.b4a78441.svg",N=a.p+"static/media/remove_circle_outline_black_24dp.1bfeccf5.svg",S=a(1);var C=function(e){var t=e.layoutState,a=e.selectedState,n=function(){return Object(f.a)(Object(f.a)({},h(t.get(),!0)),{},{layout:t.get()})},c=function(){var e=Object(g.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://diy-mechanical-keyboard.herokuapp.com",e.next=3,y.a.post("https://diy-mechanical-keyboard.herokuapp.com/model-3d/plate",n());case 3:t=e.sent,a=t.data,w.a.saveAs(new Blob([a],{type:"text/plain; charset=utf-8"}),"plate-model.stl");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(e){if(-1!==a.get()){var n=Number(e.target.value);if("width"===e.target.id)t[a.get()].w.set(n);else{if("height"!==e.target.id)return void console.log(">>>>> undefined id: "+e.target.id);t[a.get()].h.set(n)}}};return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"editpanel__container",children:[Object(S.jsxs)(O.a.Group,{controlId:"uploadLayout",className:"editpanel__item",children:[Object(S.jsx)(O.a.Label,{children:"Layout File to Upload"}),Object(S.jsx)(O.a.File,{id:"layoutFile",type:"file",accept:".json",onChange:function(e){var n=new FileReader;n.readAsBinaryString(e.target.files[0]),n.onloadend=function(){var e=JSON.parse(n.result);Object.entries(e.layout).map((function(e){var t=Object(m.a)(e,2),a=(t[0],t[1]);a.w="w"in a?a.w:1,a.h="h"in a?a.h:1})),t.set(e.layout),a.set(-1)}}})]}),Object(S.jsx)(x.a,{className:"editpanel__item",variant:"outline-secondary",onClick:function(){var e=JSON.stringify(n());w.a.saveAs(new Blob([e],{type:"text/json; charset=utf-8"}),"plate-layout.json")},children:"Download Layout"}),Object(S.jsx)(x.a,{className:"editpanel__item",variant:"outline-success",onClick:c,children:"Generate 3D Model"})]}),Object(S.jsxs)("div",{className:"editpanel__container",children:[Object(S.jsxs)(O.a.Group,{controlId:"keyLabel",className:"editpanel__item",children:[Object(S.jsx)(O.a.Label,{children:"Key Label"}),Object(S.jsx)(O.a.Control,{type:"text",name:"key_label",value:-1===a.get()?"":t[a.get()].label.get(),onChange:function(e){-1!==a.get()&&t[a.get()].label.set(e.target.value)}})]}),Object(S.jsxs)(O.a.Group,{controlId:"width",className:"editpanel__item",children:[Object(S.jsx)(O.a.Label,{children:"Width"}),Object(S.jsxs)(O.a.Control,{as:"select",name:"key_width",value:-1===a.get()?"1":t[a.get()].w.get(),onChange:i,children:[Object(S.jsx)("option",{value:"1",children:"1U"}),Object(S.jsx)("option",{value:"1.25",children:"1.25U"}),Object(S.jsx)("option",{value:"1.5",children:"1.5U"}),Object(S.jsx)("option",{value:"1.75",children:"1.75U"}),Object(S.jsx)("option",{value:"2",children:"2U"}),Object(S.jsx)("option",{value:"2.25",children:"2.25U"}),Object(S.jsx)("option",{value:"2.75",children:"2.75U"})]})]}),Object(S.jsxs)(O.a.Group,{controlId:"height",className:"editpanel__item",children:[Object(S.jsx)(O.a.Label,{children:"Height"}),Object(S.jsxs)(O.a.Control,{as:"select",name:"key_height",value:-1===a.get()?"1":t[a.get()].h.get(),onChange:i,children:[Object(S.jsx)("option",{value:"1",children:"1U"}),Object(S.jsx)("option",{value:"2",children:"2U"})]})]}),Object(S.jsx)(x.a,{className:"editpanel__item",variant:"outline-light",children:Object(S.jsx)("img",{className:"editpanel__imageicon",alt:"Add New Switch",src:k,onClick:function(){var e=h(t.get(),!0),a=e.width,n=e.height;t.merge([{label:"New Key",x:a,y:Math.max(n-1,0),w:1,h:1}])}})}),Object(S.jsx)(x.a,{className:"editpanel__item",variant:"outline-light",children:Object(S.jsx)("img",{className:"editpanel__imageicon",alt:"Remove Selected Switch",src:N,onClick:function(){-1!==a.get()&&(t[a.get()].set(r.a),a.set(-1))}})})]})]})},L=a(35),U=a.n(L);a(70);var F=function(e){var t=e.keyState,a=t.label,n=t.x,c=t.y,i=t.w,l=t.h,r=e.selectedState,s=r.get()===e.seq?"key-switch-selected":"";return Object(S.jsx)(U.a,{grid:[15,15],bounds:{left:o,top:o},position:j(n.get(),c.get()),onDrag:function(e,t){n.set((function(e){return e+t.deltaX/d})),c.set((function(e){return e+t.deltaY/d}))},children:Object(S.jsx)("div",{className:"key-switch ".concat(s),style:u(i.get(),l.get()),onClick:function(){r.set((function(t){return t===e.seq?-1:e.seq}))},children:a.get()})})};var G=function(){var e=Object(r.b)([{label:"Key 1",w:1,h:1,x:0,y:0}]),t=Object(r.b)(-1);return Object(S.jsxs)("div",{children:[Object(S.jsx)(C,{layoutState:e,selectedState:t}),Object(S.jsx)("div",{className:"key-plate",style:h(e.get()),children:e.map((function(e,a){return Object(S.jsx)(F,{seq:a,keyState:e,selectedState:t},a)}))})]})};a(71);var A=function(){return Object(S.jsx)("header",{children:Object(S.jsx)("p",{class:"app_name",children:"Mechanical Keyboard Layout Editor"})})};a(72);var B=function(){return Object(S.jsxs)("footer",{className:"footer",children:[Object(S.jsxs)("div",{className:"footer__item",children:["Copyright\xa92021 Sinjin Jang",Object(S.jsx)("br",{}),"All rights reserved."]}),Object(S.jsxs)("div",{className:"footer__item",children:["Get source code of this app:",Object(S.jsx)("br",{}),Object(S.jsx)("a",{href:"https://github.com/SinjinJang/mechanical-keyboard-layout-editor",target:"_blank",children:"mechanical-keyboard-layout-editor on GitHub"})]}),Object(S.jsxs)("div",{className:"footer__item",children:[Object(S.jsx)("a",{href:"https://donaricano.com/mypage/1722367584_zHWZl2",target:"_blank",children:"\ub3c4\ub124\ub9ac\uce74\ub178 \ucee4\ud53c \ud6c4\uc6d0"}),Object(S.jsx)("br",{}),Object(S.jsx)("a",{href:"https://www.buymeacoffee.com/sinjin0",target:"_blank",children:"Buy Me a Coffee"})]})]})};var I=function(){return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(A,{}),Object(S.jsx)(G,{}),Object(S.jsx)(B,{})]})},J=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,76)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,l=t.getTTFB;a(e),n(e),c(e),i(e),l(e)}))};a(73),a(74);l.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(I,{})}),document.getElementById("root")),J()}},[[75,1,2]]]);
//# sourceMappingURL=main.4df0e71d.chunk.js.map