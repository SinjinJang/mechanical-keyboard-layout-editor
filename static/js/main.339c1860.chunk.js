(this["webpackJsonpmechanical-keyboard-layout-editor"]=this["webpackJsonpmechanical-keyboard-layout-editor"]||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},107:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},143:function(e,t,a){},145:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(10),l=a.n(c),r=a(44),o=a(11),s=(a(104),a(105),a(38)),d=a(78),j=15,u=60;function b(e,t){return{x:e*u+j,y:t*u+j}}function h(e,t){return{width:e*u-2,height:t*u-2}}function p(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,i=0,c=Object(d.a)(e);try{for(c.s();!(t=c.n()).done;){var l=t.value,r=l.x+l.w;n=r>n?r:n;var o=l.y+l.h;i=o>i?o:i}}catch(s){c.e(s)}finally{c.f()}return{width:a?n:n*u+30,height:a?i:i*u+30}}var x=a(58),O=a.n(x),g=a(79),f=a(62),m=a(53),v=(a(107),a(181)),y=a(185),k=a(186),_=a(200),w=a(202),N=a(197),C=a(190),S=a(191),D=a(192),U=a(80),F=a.n(U),A=a(59),L=a.n(A),B=a(2);var J=function(e){var t=e.layoutState,a=e.selectedState,n=Object(s.b)(!1),i=function(){return Object(f.a)(Object(f.a)({},p(t.get(),!0)),{},{layout:t.get()})},c=function(){var e=Object(g.a)(O.a.mark((function e(t){var a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.get()){e.next=3;break}return console.log("prevent duplicated click!"),e.abrupt("return");case 3:return n.set(!0),"https://diy-mechanical-keyboard.herokuapp.com",e.next=7,F.a.post("https://diy-mechanical-keyboard.herokuapp.com"+"/model/plate/".concat(t),i());case 7:a=e.sent,c=a.data,L.a.saveAs(new Blob([c],{type:"text/plain; charset=utf-8"}),"model-plate.".concat(t)),n.set(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){if(-1!==a.get()&&""!==e.target.value){var n=Number(e.target.value);if("selected-key-width"===e.target.id)t[a.get()].w.set(n);else{if("selected-key-height"!==e.target.id)return void console.log(">>>>> undefined id: "+e.target.id);t[a.get()].h.set(n)}}};return Object(B.jsxs)("div",{className:"editpanel",children:[n.get()?Object(B.jsx)("div",{className:"loading",children:Object(B.jsx)(v.a,{})}):"",Object(B.jsxs)("div",{className:"editpanel__container",children:[Object(B.jsx)(y.a,{className:"editpanel__item",variant:"outlined",color:"primary",onClick:function(e){e.preventDefault();var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept",".json"),n.onchange=function(e){var n=new FileReader;n.readAsBinaryString(e.target.files[0]),n.onloadend=function(){var e=JSON.parse(n.result);Object.entries(e.layout).map((function(e){var t=Object(m.a)(e,2),a=(t[0],t[1]);a.w="w"in a?a.w:1,a.h="h"in a?a.h:1})),t.set(e.layout),a.set(-1)}},n.click()},children:"Upload Layout"}),Object(B.jsx)(y.a,{className:"editpanel__item",variant:"outlined",color:"primary",onClick:function(){var e=JSON.stringify(i());L.a.saveAs(new Blob([e],{type:"text/json; charset=utf-8"}),"plate-layout.json")},children:"Download Layout"}),Object(B.jsx)(y.a,{className:"editpanel__item",variant:"outlined",color:"primary",onClick:function(){return c("stl")},children:"Generate STL (3D)"}),Object(B.jsx)(y.a,{className:"editpanel__item",variant:"outlined",color:"primary",onClick:function(){return c("dxf")},children:"Generate DXF (2D)"})]}),Object(B.jsxs)("div",{className:"editpanel__container",children:[Object(B.jsx)(k.a,{className:"editpanel__item",children:Object(B.jsx)(_.a,{id:"selected-key-label",label:"Key Label",value:-1===a.get()?"":t[a.get()].label.get(),onChange:function(e){-1!==a.get()&&t[a.get()].label.set(e.target.value)}})}),Object(B.jsxs)(k.a,{className:"editpanel__item",children:[Object(B.jsx)(w.a,{htmlFor:"select-key-width",children:"Width"}),Object(B.jsxs)(N.a,{native:!0,id:"selected-key-width",label:"Width",value:-1===a.get()?"":t[a.get()].w.get(),onChange:l,children:[Object(B.jsx)("option",{value:""}),Object(B.jsx)("option",{value:"1",children:"1U"}),Object(B.jsx)("option",{value:"1.25",children:"1.25U"}),Object(B.jsx)("option",{value:"1.5",children:"1.5U"}),Object(B.jsx)("option",{value:"1.75",children:"1.75U"}),Object(B.jsx)("option",{value:"2",children:"2U"}),Object(B.jsx)("option",{value:"2.25",children:"2.25U"}),Object(B.jsx)("option",{value:"2.75",children:"2.75U"})]})]}),Object(B.jsxs)(k.a,{className:"editpanel__item",children:[Object(B.jsx)(w.a,{htmlFor:"select-key-height",children:"Height"}),Object(B.jsxs)(N.a,{native:!0,id:"selected-key-height",label:"Height",value:-1===a.get()?"":t[a.get()].h.get(),onChange:l,children:[Object(B.jsx)("option",{value:""}),Object(B.jsx)("option",{value:"1",children:"1U"}),Object(B.jsx)("option",{value:"2",children:"2U"})]})]}),Object(B.jsx)(C.a,{className:"editpanel__item editpanel__imageicon",alt:"Add New Switch",onClick:function(){var e=p(t.get(),!0),a=e.width,n=e.height;t.merge([{label:"New Key",x:a,y:Math.max(n-1,0),w:1,h:1}])},children:Object(B.jsx)(S.a,{})}),Object(B.jsx)(C.a,{className:"editpanel__item editpanel__imageicon",alt:"Remove Selected Switch",onClick:function(){-1!==a.get()&&(t[a.get()].set(s.a),a.set(-1))},children:Object(B.jsx)(D.a,{})})]})]})},K=a(85),M=a.n(K);a(133);var G=function(e){var t=e.keyState,a=t.label,n=t.x,i=t.y,c=t.w,l=t.h,r=e.selectedState,o=r.get()===e.seq?"key-switch-selected":"";return Object(B.jsx)(M.a,{grid:[15,15],bounds:{left:j,top:j},position:b(n.get(),i.get()),onDrag:function(e,t){n.set((function(e){return e+t.deltaX/u})),i.set((function(e){return e+t.deltaY/u}))},children:Object(B.jsx)("div",{className:"key-switch ".concat(o),style:h(c.get(),l.get()),onClick:function(){r.set((function(t){return t===e.seq?-1:e.seq}))},children:a.get()})})};var H=function(){var e=Object(s.b)([{label:"New Key",w:1,h:1,x:0,y:0}]),t=Object(s.b)(-1);return Object(B.jsxs)("div",{children:[Object(B.jsx)(J,{layoutState:e,selectedState:t}),Object(B.jsx)("div",{className:"key-plate",style:p(e.get()),children:e.map((function(e,a){return Object(B.jsx)(G,{seq:a,keyState:e,selectedState:t},a)}))})]})};var T=function(){return Object(B.jsx)("div",{className:"home",children:Object(B.jsx)(H,{})})},q=(a(134),function(){return Object(B.jsx)("div",{className:"about",children:"about..."})}),E=(a(135),a(199)),P=a(196),I=a(194),W=a(195),X=a(193),R=a(86),Y=a.n(R);function z(){var e=i.a.useState(!1),t=Object(m.a)(e,2),a=t[0],n=t[1],c=function(){n(!1)};return Object(B.jsxs)("div",{children:[Object(B.jsx)("div",{style:{position:"fixed",right:"5px",top:"5px"},children:Object(B.jsx)(C.a,{variant:"outlined",color:"default",onClick:function(){n(!0)},children:Object(B.jsx)(Y.a,{})})}),Object(B.jsxs)(E.a,{open:a,onClose:c,"aria-labelledby":"about-dialog-title","aria-describedby":"about-dialog-description",children:[Object(B.jsx)(X.a,{id:"about-dialog-title",children:"About This App"}),Object(B.jsxs)(I.a,{children:[Object(B.jsx)(W.a,{id:"about-dialog-description",children:"Mechanical Keyboard Layout Editor\uc740 \uae30\uacc4\uc2dd \ud0a4\ubcf4\ub4dc\ub97c DIY\ub85c \uc81c\uc791\ud558\uae30 \uc704\ud574 \ud0a4 \uc2a4\uc704\uce58\ub97c \uc0ac\uc6a9\uc790\uac00 \uc6d0\ud558\ub294 \ub300\ub85c \ubc30\uce58\ud558\uace0 \uc774\ub97c 3D \ud504\ub9b0\ud130\ub85c \ucd9c\ub825\ud560 \uc218 \uc788\ub3c4\ub85d STL \ud615\uc2dd\uc758 3D \ubaa8\ub378\ub9c1 \ud30c\uc77c\uc744 \uc0dd\uc131\ud574\uc90d\ub2c8\ub2e4."}),Object(B.jsx)(W.a,{id:"about-dialog-description",children:"\ud604\uc7ac\ub294 \ud0a4 \uc2a4\uc704\uce58\ub97c \uaf42\uc744 \uc218 \uc788\ub294 \uc0c1\ud310(plate)\uc758 3D \ubaa8\ub378\ub9c1 \ud30c\uc77c\uc744 \uc0dd\uc131\ud574\uc8fc\uba70, PCB \uc6a9\ub3c4\uc758 \ud558\ud310\ub3c4 \uc0dd\uc131\uc744 \ud560\uc218 \uc788\ub3c4\ub85d \uace0\ub824 \uc911\uc785\ub2c8\ub2e4. \ud0a4 \uc2a4\uc704\uce58 \ubc0f \ud0a4\ucea1\uc740 \uae30\uc131\ud488\uc744 \uad6c\ub9e4\ud558\uc5ec \uc870\ub9bd\uc774 \ud544\uc694\ud558\uba70 Cherry MX, Kailh \uc2a4\uc704\uce58 \ub4f1\uc774 \ud638\ud658\ub429\ub2c8\ub2e4."}),Object(B.jsx)(W.a,{id:"about-dialog-description",children:"\uc0ac\uc6a9\uc790\uac00 \ub514\uc790\uc778\ud55c \ud0a4 \ub808\uc774\uc544\uc6c3 \ubc0f \ubaa8\ub378\ub9c1\uc758 \uc18c\uc720\uad8c\uc740 \ubaa8\ub450 \uc774\ub97c \ub514\uc790\uc778\ud55c \uc0ac\uc6a9\uc790\uc5d0\uac8c \uc788\uc2b5\ub2c8\ub2e4. \ub808\uc774\uc544\uc6c3 \uc124\uc815\uc744 \uc11c\ubc84\ub85c \uc804\uc1a1\ud558\uc5ec 3D \ubaa8\ub378\ub9c1 \uc791\uc5c5\uc744 \uc218\ud589\ud558\uc9c0\ub9cc \uc5b4\ub5a0\ud55c \uc815\ubcf4\ub3c4 \uae30\ub85d\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),Object(B.jsx)(W.a,{id:"about-dialog-description",children:"\ub610\ud55c, \uc0dd\uc131\ub41c 3D \ubaa8\ub378\ub9c1 \ud30c\uc77c\ub85c \ucd9c\ub825 \uc2dc \ubc1c\uc0dd\ud560 \uc218 \uc788\ub294 \ubaa8\ub4e0 \ubb38\uc81c\ub294 \uc0ac\uc6a9\uc790\uc5d0\uac8c \ucc45\uc784\uc774 \uc788\uc2b5\ub2c8\ub2e4. \uc81c\uac00 \ucc38\uace0\ud55c \ud0a4 \uc2a4\uc704\uce58 \ubc0f \uc2a4\ud14c\ube4c\ub77c\uc774\uc800\uc5d0 \ub9de\ub3c4\ub85d \uc124\uacc4\uac00 \ub418\uc5c8\uc73c\ubbc0\ub85c \ub2e4\ub978 \ubd80\ud488\uacfc\ub294 \ud638\ud658\uc5d0 \ubb38\uc81c\uac00 \uc788\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),Object(B.jsxs)(W.a,{id:"about-dialog-description",children:["\ubc1c\uacac\ud558\uc2e0 \uc774\uc288 \ubc0f \uac1c\uc120 \uc0ac\ud56d, \ub610\ub294 \ubb38\uc758 \uc0ac\ud56d\uc774 \uc788\uc73c\uc2dc\uba74,\xa0",Object(B.jsx)("a",{href:"https://github.com/SinjinJang/mechanical-keyboard-layout-editor",target:"_blank",children:"GitHub issue"}),"\xa0\ud639\uc740\xa0",Object(B.jsx)("a",{href:"mailto:sinjin.jang0.gmail.com",children:"e-mail"}),"\ub85c \uc54c\ub824\uc8fc\uc138\uc694."]}),Object(B.jsxs)(W.a,{id:"about-dialog-description",children:[Object(B.jsx)("p",{children:"\uc54c\uace0 \uc788\ub294 \uc774\uc288 \uc0ac\ud56d:"}),Object(B.jsxs)("ul",{children:[Object(B.jsx)("li",{children:"\ub192\uc774\uac00 2U\uc778 \ud0a4 \uc2a4\uc704\uce58\uc758 \uc2a4\ud14c\ube4c\ub77c\uc774\uc800 \ud640 \uc5c6\uc74c"}),Object(B.jsx)("li",{children:"PCB-mount \uc2a4\ud14c\ube4c\ub77c\uc774\uc800\uc5d0\uc11c plate-mount \uc2a4\ud14c\ube4c\ub77c\uc774\uc800\ub85c \ubcc0\uacbd \uc608\uc815"})]})]})]}),Object(B.jsx)(P.a,{children:Object(B.jsx)(y.a,{onClick:c,color:"primary",autoFocus:!0,children:"Close"})})]})]})}var Z=function(){return Object(B.jsxs)("header",{children:[Object(B.jsx)("p",{className:"app_name",children:"Mechanical Keyboard Layout Editor"}),Object(B.jsx)(z,{})]})};a(140);var Q=function(){return Object(B.jsxs)("footer",{className:"footer",children:[Object(B.jsxs)("div",{className:"footer__item",children:["Copyright\xa92021 Sinjin Jang",Object(B.jsx)("br",{}),"All rights reserved."]}),Object(B.jsxs)("div",{className:"footer__item",children:["Get source code of this app:",Object(B.jsx)("br",{}),Object(B.jsx)("a",{href:"https://github.com/SinjinJang/mechanical-keyboard-layout-editor",target:"_blank",children:"mechanical-keyboard-layout-editor on GitHub"})]}),Object(B.jsxs)("div",{className:"footer__item",children:[Object(B.jsx)("a",{href:"https://donaricano.com/mypage/1722367584_zHWZl2",target:"_blank",children:"\ub3c4\ub124\ub9ac\uce74\ub178 \ucee4\ud53c \ud6c4\uc6d0"}),Object(B.jsx)("br",{}),Object(B.jsx)("a",{href:"https://www.buymeacoffee.com/sinjin0",target:"_blank",children:"Buy Me a Coffee"})]})]})},V=(a(141),function(){return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(Z,{}),Object(B.jsxs)(r.a,{children:[Object(B.jsx)(o.a,{exact:!0,path:"/",component:T}),Object(B.jsx)(o.a,{path:"/about",component:q})]}),Object(B.jsx)(Q,{})]})}),$=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,204)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,l=t.getTTFB;a(e),n(e),i(e),c(e),l(e)}))};a(143),a(144);l.a.render(Object(B.jsx)(i.a.StrictMode,{children:Object(B.jsx)(V,{})}),document.getElementById("root")),$()}},[[145,1,2]]]);
//# sourceMappingURL=main.339c1860.chunk.js.map